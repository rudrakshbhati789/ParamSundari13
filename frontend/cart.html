<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cart – Param Sundari</title>
<style>
body { background:#000; color:#fff; font-family:Poppins; margin:0; }
nav { background:#000; padding:15px; display:flex; gap:10px; }
nav a { color:#ffb5c8; text-decoration:none; }
.cart-item { background:#111; padding:10px; margin:10px; border:1px solid #ffb5c8; border-radius:10px; }
input { width:90%; padding:10px; margin:10px; border-radius:8px; border:1px solid #ffb5c8; }
button { width:90%; padding:12px; background:#ffb5c8; border:none; margin:10px; }
</style>
</head>

<body>

<nav>
<a href="index.html">Home</a>
<a href="product.html">Products</a>
</nav>

<h2 style="text-align:center;color:#ffb5c8;">Your Cart</h2>

<div id="cart-items"></div>
<h3 id="total" style="text-align:center; color:#ffb5c8;"></h3>

<h3 style="text-align:center;color:#ffb5c8;">Customer Details</h3>

<input id="name" placeholder="Full Name">
<input id="phone" placeholder="Phone Number">
<input id="address" placeholder="Full Address">
<input id="city" placeholder="City">
<input id="pincode" placeholder="Pincode">

<button onclick="placeOrder()">Place Order</button>

<<<<<<< HEAD
<script>
const backendURL = "https://backend-0slk.onrender.com";
=======
  <script>
    const backendURL = "http://localhost:5000";
    const whatsappNumber = "+919993658088"; // MUST have country code
>>>>>>> 7779ea7c02b11646ffb713006daf6469e2ed1794

let cart = JSON.parse(localStorage.getItem("cart")) || [];

function loadCart() {
    const box = document.getElementById("cart-items");
    let total = 0;

    box.innerHTML = "";

    cart.forEach(item => {
        total += Number(item.price);
        box.innerHTML += `
        <div class='cart-item'>
            <h3>${item.name}</h3>
            <p>₹${item.price}</p>
        </div>`;
    });

    document.getElementById("total").innerText = "Total: ₹" + total;
}
loadCart();

async function placeOrder() {
    let order = {
        name: name.value,
        phone: phone.value,
        address: address.value,
        city: city.value,
        pincode: pincode.value,
        cart,
        total: cart.reduce((a,b)=>a+Number(b.price),0)
    };

    await fetch(`${backendURL}/api/orders`, {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify(order)
    });

    let msg = `New Order:%0AName:${order.name}%0APhone:${order.phone}%0AAddress:${order.address}%0ACity:${order.city}%0APincode:${order.pincode}%0A`;

    cart.forEach(i => msg += `• ${i.name} – ₹${i.price}%0A`);

    msg += `Total: ₹${order.total}`;

    window.location.href = `https://wa.me/+919993658088?text=${msg}`;

    alert("Order placed!");
    localStorage.removeItem("cart");
}
</script>

</body>
</html>
